<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Docentes Brown ‚Äî Plataforma educativa</title>
  <meta name="description" content="Herramientas, podcast y noticias de Docentes Brown." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --azul:#24496e; --crema:#f3efdc; --violeta:#6c467e; --coral:#da6863;
      --negro:#101418; --gris:#5b6572; --borde:#e7e3d8; --whatsapp:#2b647b;
      --space-1:.6rem; --space-2:1rem; --space-3:1.6rem; --space-4:2.4rem;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--negro);background:var(--crema)}
    .container{width:min(1100px,92%);margin-inline:auto}
    section{margin-block:var(--space-4)}
    header{position:sticky;top:0;background:rgba(243,239,220,.9);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--borde);z-index:50}
    nav{display:flex;align-items:center;justify-content:space-between;padding:var(--space-1) 0}
    .brand{display:flex;align-items:center;gap:.65rem;font-weight:800;color:var(--azul);letter-spacing:.2px}
    .brand img{height:44px;width:auto;display:block}
    .nav-links{display:flex;gap:.6rem;align-items:center;overflow-x:auto;white-space:nowrap;padding-bottom:.2rem}
    .nav-links a{font-weight:700;color:var(--azul);text-decoration:none;padding:.45rem .7rem;border:none;background:transparent;border-radius:10px}
    .nav-links a:hover{text-decoration:underline}
    .btn{border:none;cursor:pointer;border-radius:14px;padding:.7rem .95rem;font-weight:700;letter-spacing:.2px}
    .btn-primary{background:linear-gradient(135deg,var(--violeta),var(--coral));color:#fff}
    .btn-outline{background:#fff;border:1px solid var(--borde);color:var(--azul)}
    .btn-link{display:inline-block;border:1px solid var(--borde);padding:.55rem .8rem;border-radius:12px;text-decoration:none;color:var(--azul);font-weight:700;background:#fff}
    .card{background:#fff;border:1px solid var(--borde);border-radius:18px;box-shadow:0 8px 24px rgba(16,20,24,.04)}
    .section-title{color:var(--azul);margin:0 0 .6rem 0}
    .subtitle{color:var(--gris);font-size:1.04rem}

    /* HERO */
    .hero{margin:0}
    .hero-wrap{position:relative;background:linear-gradient(135deg,var(--violeta),var(--coral));}
    .news-carousel{position:relative;min-height:360px}
    .news-slide{position:relative;isolation:isolate;display:grid;grid-template-columns:1fr;min-height:360px;padding:var(--space-3);transition:opacity .3s ease}
    .news-bg{position:absolute;inset:0;z-index:-1;background-size:cover;background-position:center;filter:brightness(.68)}
    .news-content{max-width:860px;color:#fff}
    .news-content h2{margin:.2rem 0 0;font-size:clamp(1.8rem,4vw,2.6rem);line-height:1.15}
    .news-content p{margin:.6rem 0 1rem 0}
    .news-content .btn-link{background:#ffffffcc;color:#1d2430}
    .news-controls{position:absolute;left:0;right:0;bottom:12px;display:flex;align-items:center;justify-content:center;gap:.6rem}
    .news-prev,.news-next{border:1px solid var(--borde);background:#fff;border-radius:10px;padding:.3rem .55rem;cursor:pointer}
    .news-dots{display:flex;gap:.35rem}
    .news-dot{width:10px;height:10px;border-radius:999px;background:#ffffff80;border:1px solid #fff;cursor:pointer}
    .news-dot.active{background:#fff}

    /* Apps */
    .apps{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}
    @media (max-width:920px){.apps{grid-template-columns:1fr 1fr}}
    @media (max-width:620px){.apps{grid-template-columns:1fr}}
    .app-card{padding:1.1rem;display:flex;flex-direction:column;gap:.6rem}
    .app-card h3{margin:.2rem 0;color:var(--azul)}

    /* Podcast */
    .audio-list{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}
    @media (max-width:820px){.audio-list{grid-template-columns:1fr}}
    .audio-card{padding:1rem}
    .audio-card h4{margin:.2rem 0;color:var(--violeta)}
    .spotify-embed{position:relative}
    .spotify-embed .eq{position:absolute;left:10px;top:10px;display:flex;gap:3px}
    .spotify-embed .eq span{width:3px;height:10px;background:#1DB954;border-radius:2px;display:block;animation:db-eq 1s infinite ease-in-out}
    .spotify-embed .eq span:nth-child(2){animation-delay:.15s}
    .spotify-embed .eq span:nth-child(3){animation-delay:.3s}
    @keyframes db-eq{0%,100%{transform:scaleY(.4)}50%{transform:scaleY(1.4)}}

    /* Noticias (lista) */
    .news-list{display:grid;gap:.8rem}
    .news-item{padding:1rem}
    .news-item h4{margin:.1rem 0;color:var(--violeta)}

    /* CTA */
    .cta{padding:var(--space-3);display:flex;align-items:center;justify-content:space-between;gap:1rem}
    @media (max-width:820px){.cta{flex-direction:column;align-items:flex-start}}

    /* Footer */
    footer{margin-top:var(--space-4);border-top:1px solid var(--borde);padding:1.2rem 0;color:var(--gris)}
    footer a{color:var(--violeta);font-weight:700;text-decoration:none}

    /* Floating buttons */
    .floating{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:.6rem;z-index:60}
    .floating a{display:inline-flex;align-items:center;gap:.5rem;padding:.7rem .9rem;border-radius:999px;color:#fff;text-decoration:none;box-shadow:0 10px 26px rgba(0,0,0,.15)}
    .floating .wa{background:var(--whatsapp)}
    .floating .cafecito{background:var(--coral)}

    /* Dark mode */
    @media (prefers-reduced-motion: reduce){
      .news-slide{transition:none}
      .spotify-embed .eq span{animation:none}
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav>
        <div class="brand" aria-label="Docentes Brown">
          <img src="logo-docentes-brown.png" alt="Docentes Brown"/>
        </div>
        <div class="nav-links">
          <a href="#apps">Herramientas</a>
          <a href="#podcast">Podcast</a>
          <a href="#noticias">Noticias</a>
          <a href="graficos.html">Gr√°ficos</a>
          <a href="#sumate">Sumate</a>
          
        </div>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-wrap">
      <div class="container" style="padding:0">
        <div id="newsCarousel" class="news-carousel" aria-roledescription="carousel" aria-label="Noticias destacadas">
          <div class="news-slide" data-index="0"></div>
          <div class="news-controls">
            <button class="news-prev" aria-label="Anterior">‚óÄ</button>
            <div class="news-dots" role="tablist" aria-label="Paginaci√≥n de noticias"></div>
            <button class="news-next" aria-label="Siguiente">‚ñ∂</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Herramientas -->
  <section id="apps" class="container">
    <h2 class="section-title">Herramientas</h2>
    <div class="apps">
      <article class="card app-card">
        <h3>üõçÔ∏è Tienda Docentes Brown</h3>
        <p class="subtitle">Merch, materiales y m√°s para apoyar a la comunidad.</p>
        <a class="btn-link" href="https://pency.app/docentesbrown" target="_blank" rel="noopener">Abrir</a>
      </article>
      <article class="card app-card">
        <h3>üìù Buscador de Concursos de Superior</h3>
        <p class="subtitle">Consult√° y filtr√° concursos vigentes del nivel superior.</p>
        <a class="btn-link" href="https://docentesbrown.github.io/concursos_superior/" target="_blank" rel="noopener">Abrir</a>
      </article>
      <article class="card app-card">
        <h3>üí∏ Calculadora Salarial</h3>
        <p class="subtitle">Simul√° el salario docente seg√∫n cargo, horas y antig√ºedad.</p>
        <a class="btn-link" href="https://docentesbrown.github.io/Calculadora.Salarial.Docentes.Brown/" target="_blank" rel="noopener">Abrir</a>
      </article>
      <article class="card app-card">
        <h3>üéØ Buscador de Profes Particulares</h3>
        <p class="subtitle">Encontr√° profes por zona, localidad y materia.</p>
        <a class="btn-link" href="https://docentesbrown.github.io/buscador.particular/" target="_blank" rel="noopener">Abrir</a>
      </article>
    </div>
  </section>

  <!-- Podcast -->
  <section id="podcast" class="container">
    <div class="card" style="padding:1.5rem">
      <h2 class="section-title">üéôÔ∏è Podcast Docentes Brown</h2>
      <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin:.4rem 0 1rem 0">
        <a id="btnPodcastRSS" class="btn btn-outline" href="#">RSS Podcast</a>
      </div>
      <div id="podcastList" class="audio-list" aria-live="polite"></div>
      <small class="subtitle">Reproduc√≠ directamente desde Spotify.</small>
    </div>
  </section>

  <!-- Noticias -->
  <section id="noticias" class="container">
    <div class="card" style="padding:1.5rem">
      <h2 class="section-title">üóûÔ∏è Noticias</h2>
      <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin:.4rem 0 1rem 0">
        <button id="btnPrev" class="btn btn-outline">Anterior</button>
        <button id="btnNext" class="btn btn-outline">Siguiente</button>
        <a id="btnNewsRSS" class="btn btn-outline" href="#">RSS Noticias</a>
      </div>
      <div id="newsList" class="news-list" aria-live="polite"></div>
      <small class="subtitle" id="newsMeta"></small>
    </div>
  </section>

  <!-- Sumate -->
  <section id="sumate" class="container">
    <a class="card cta" href="https://forms.gle/TALg7vqSe8f6LzxK8" target="_blank" rel="noopener" style="text-decoration:none;">
      <div>
        <h3 style="margin:.2rem 0;color:var(--violeta)">¬øSos docente? Sumate a la gu√≠a</h3>
        <p style="margin:.2rem 0;color:var(--gris)">Complet√° el formulario y publicamos tu perfil con contacto y materias.</p>
      </div>
      <div class="cta-row">
        <span class="btn btn-primary" role="button" aria-label="Abrir formulario de Sumate">Abrir formulario</span>
      </div>
    </a>
  </section>

  <footer>
    <div class="container">
      <div style="display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap;align-items:center">
        <small>¬© <span id="year"></span> Docentes Brown. Hecho con ‚ô• en Almirante Brown.</small>
        <small>Creado por <a href="https://instagram.com/docentesbrown" target="_blank" rel="noopener">@docentesbrown</a></small>
      </div>
    </div>
  </footer>

  <div class="floating">
    <a class="wa" href="https://wa.me/5491153196358" target="_blank" rel="noopener" aria-label="WhatsApp"><svg viewBox="0 0 32 32" width="22" height="22" aria-hidden="true"><path fill="white" d="M16 3C9.4 3 4 8.4 4 15c0 2.3.7 4.5 2 6.4L4 29l7-1.8c1.8 1 3.9 1.6 5.9 1.6 6.6 0 12-5.4 12-12S22.6 3 16 3zm0 22.1c-1.9 0-3.7-.5-5.3-1.5l-.4-.2-3.2.8.9-3.1-.2-.4C7 19.1 6.6 17.1 6.6 15 6.6 9.9 10.9 5.6 16 5.6S25.4 9.9 25.4 15 21.1 25.1 16 25.1zm6-7.5c-.3-.2-1.9-.9-2.2-1-.3-.1-.5-.2-.7.2-.2.3-.8 1-1 1.2-.2.2-.4.3-.7.1-.3-.2-1.1-.4-2.1-1.3-.8-.7-1.3-1.6-1.4-1.9-.1-.3 0-.5.1-.7.1-.1.3-.4.4-.6.1-.2.2-.3.3-.5.1-.2 0-.4 0-.5 0-.2-.7-1.8-1-2.4-.3-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.8.4-.3.3-1.1 1.1-1.1 2.7s1.1 3.1 1.2 3.3c.1.2 2.2 3.3 5.3 4.6.7.3 1.3.5 1.8.6.8.2 1.5.2 2.1.1.7-.1 1.9-.8 2.2-1.6.3-.8.3-1.4.2-1.6-.1-.2-.3-.3-.6-.5z"/></svg></a>
    <a class="cafecito" href="https://cafecito.app/docentesbrown" target="_blank" rel="noopener" aria-label="Cafecito">‚òï</a>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Modo oscuro toggle
    const rootHtml = document.documentElement;
    const savedTheme = 
    if(savedTheme){ rootHtml.setAttribute('data-theme', savedTheme); }
    
      const next = currentIsDark ? 'light' : 'dark';
      rootHtml.setAttribute('data-theme', next);
      
    });

    // Helpers
    async function loadJson(url, fallback){
      try{
        const r = await fetch(url, {cache:'no-store'});
        if(!r.ok) throw new Error('fetch failed');
        const data = await r.json();
        return Array.isArray(data) ? data : fallback;
      }catch{ return fallback; }
    }

    const PODCASTS_FALLBACK = [
      {titulo:'Episodio 1 ‚Äî Mapa Escolar', fecha:'2025-10-01', spotify:'https://open.spotify.com/episode/1IaOxq5Gi0xQbEoy2ccDdQ?si=6OWrMns7RuSqpCzhEeKVCw', descripcion:'Charlamos sobre el nuevo Mapa Escolar online.'},
      {titulo:'Episodio ejemplo ‚Äî Pr√≥ximamente', fecha:'2025-09-15', spotify:'https://open.spotify.com/episode/0example3', descripcion:'Plantilla para el pr√≥ximo episodio.'}
    ];
    const NEWS_FALLBACK = [
      {titulo:'El nuevo Mapa Escolar ya est√° online: m√°s r√°pido e intuitivo', fecha:'2025-10-03', link:'https://abc.gob.ar/noticias/el-nuevo-mapa-escolar-ya-esta-online-mas-rapido-intuitivo-y-con-herramientas-innovadoras', resumen:'La DGCyE present√≥ la nueva versi√≥n con herramientas innovadoras.', img:''},
      {titulo:'Convocatoria a concursos 2025', fecha:'2025-09-15', link:'https://docentesbrown.github.io/concursos_superior/', resumen:'Se publicaron nuevas bases y condiciones.', img:''},
      {titulo:'Calculadora Salarial: nueva actualizaci√≥n', fecha:'2025-09-10', link:'https://docentesbrown.github.io/Calculadora.Salarial.Docentes.Brown/', resumen:'Correcciones y mejoras de accesibilidad.', img:''}
    ];
    let PODCASTS = PODCASTS_FALLBACK;
    let NEWS = NEWS_FALLBACK;

    // Podcast
    async function initPodcasts(){
      PODCASTS = await loadJson('podcasts.json', PODCASTS_FALLBACK);
      PODCASTS.sort((a,b)=> new Date(b.fecha)-new Date(a.fecha));
      const $pod = document.getElementById('podcastList');
      if(!$pod) return;
      if(!PODCASTS.length){ $pod.innerHTML = '<p class="subtitle">Pronto subimos los primeros episodios.</p>'; return; }
      $pod.innerHTML = PODCASTS.map(p=>{
        const url = p.spotify || '#';
        const embed = url.includes('/embed/') ? url : url.replace('/episode/','/embed/episode/').replace('/show/','/embed/show/');
        return `
          <article class="card audio-card">
            <h4>${p.titulo}</h4>
            <p class="subtitle" style="margin:.2rem 0 .6rem 0">${new Date(p.fecha).toLocaleDateString()} ‚Äî ${p.descripcion||''}</p>
            <div class="spotify-embed">
              <div class="eq" aria-hidden="true"><span></span><span></span><span></span></div>
              <iframe data-testid="embed-iframe" style="border-radius:12px" src="${embed}" width="100%" height="152" frameborder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
            </div>
          </article>`;
      }).join('');
    }

    // Noticias
    let newsPage = 1, pageSize = 6;
    function renderNewsPaged(){
      const $news = document.getElementById('newsList');
      const $meta = document.getElementById('newsMeta');
      if(!$news) return;
      if(!NEWS.length){ $news.innerHTML = '<p class="subtitle">Sin novedades por ahora.</p>'; return; }
      NEWS.sort((a,b)=> new Date(b.fecha) - new Date(a.fecha));
      const totalPages = Math.max(1, Math.ceil(NEWS.length / pageSize));
      newsPage = Math.min(Math.max(1, newsPage), totalPages);
      const start = (newsPage-1)*pageSize;
      const slice = NEWS.slice(start, start+pageSize);
      $news.innerHTML = slice.map(n=>`
        <article class="card news-item">
          <h4>${n.titulo}</h4>
          <p class="subtitle" style="margin:.2rem 0">${new Date(n.fecha).toLocaleDateString()}</p>
          <p style="margin:.2rem 0;color:var(--gris)">${n.resumen||''}</p>
          ${n.link?`<a class="btn-link" href="${n.link}" target="_blank" rel="noopener">Ver m√°s</a>`:''}
        </article>`).join('');
      if($meta) $meta.textContent = `P√°gina ${newsPage} de ${totalPages} ‚Äî ${NEWS.length} noticias`;
    }
    function buildSlide(n){
      const bgStyle = n.img && n.img.trim()
        ? `background-image:linear-gradient(135deg, rgba(108,70,126,.85), rgba(218,104,99,.85)), url('${n.img}')`
        : `background-image:linear-gradient(135deg, var(--violeta), var(--coral))`;
      const bg = `<div class='news-bg' style="${bgStyle}"></div>`;
      const link = n.link? `<a class="btn-link" href="${n.link}" target="_blank" rel="noopener">Ver m√°s</a>`: '';
      return `${bg}<div class='news-content'><h2>${n.titulo}</h2><p>${n.resumen||''}</p>${link}</div>`;
    }
    function renderNewsTop(){
      const cont = document.getElementById('newsCarousel');
      if(!cont) return;
      NEWS.sort((a,b)=> new Date(b.fecha) - new Date(a.fecha));
      const top = NEWS.slice(0,3);
      const slide = cont.querySelector('.news-slide');
      if(!top.length){ slide.innerHTML = '<p class="subtitle" style="color:#fff;margin:1rem">Sin novedades por ahora.</p>'; return; }
      slide.innerHTML = buildSlide(top[0]);
      const dotsWrap = cont.querySelector('.news-dots');
      dotsWrap.innerHTML = top.map((_,i)=>`<button role="tab" class="news-dot ${i===0?'active':''}" data-i="${i}" aria-label="Ir a noticia ${i+1}"></button>`).join('');
      cont.querySelector('.news-prev').onclick = ()=> carouselPrev();
      cont.querySelector('.news-next').onclick = ()=> carouselNext();
      dotsWrap.onclick = (e)=>{ if(e.target && e.target.classList.contains('news-dot')){ goTo(+e.target.dataset.i); } };
      window.__DB_CAROUSEL__ = {items: top, i:0, el:cont, timer:null};
      startCarousel();
    }
    function startCarousel(){ const s = window.__DB_CAROUSEL__; stopCarousel(); if(!s) return; s.timer=setInterval(carouselNext,5000); }
    function stopCarousel(){ const s = window.__DB_CAROUSEL__; if(s&&s.timer){ clearInterval(s.timer); s.timer=null; } }
    function carouselNext(){ const s = window.__DB_CAROUSEL__; if(!s) return; s.i=(s.i+1)%s.items.length; renderSlide(); }
    function carouselPrev(){ const s = window.__DB_CAROUSEL__; if(!s) return; s.i=(s.i-1+s.items.length)%s.items.length; renderSlide(); }
    function goTo(i){ const s = window.__DB_CAROUSEL__; if(!s) return; s.i=i % s.items.length; renderSlide(); }
    function renderSlide(){
      const s = window.__DB_CAROUSEL__;
      if(!s) return;
      const slide = s.el.querySelector('.news-slide');
      slide.style.opacity=0;
      setTimeout(()=>{
        slide.innerHTML = buildSlide(s.items[s.i]);
        slide.style.opacity=1;
        const dots=[...s.el.querySelectorAll('.news-dot')];
        dots.forEach((d,idx)=>d.classList.toggle('active', idx===s.i));
      },180);
    }

    async function initNews(){
      NEWS = await loadJson('news.json', NEWS_FALLBACK);
      renderNewsTop();
      renderNewsPaged();
      const c = document.getElementById('newsCarousel');
      if(c){ c.addEventListener('mouseenter', stopCarousel); c.addEventListener('mouseleave', startCarousel); }
    }

    // Paginaci√≥n y RSS
    document.addEventListener('click', (e)=>{
      if(e.target && e.target.id==='btnNext'){newsPage++; renderNewsPaged();}
      if(e.target && e.target.id==='btnPrev'){newsPage--; renderNewsPaged();}
      if(e.target && e.target.id==='btnNewsRSS'){
        e.preventDefault();
        const items = NEWS.map(n=>`<item><title>${n.titulo}</title><pubDate>${new Date(n.fecha).toUTCString()}</pubDate><link>${n.link||location.href}</link><description>${(n.resumen||'')}</description></item>`).join('');
        const rss = `<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"><channel><title>Noticias Docentes Brown</title><link>${location.href}</link><description>Novedades</description>${items}</channel></rss>`;
        const blob = new Blob([rss], {type:'application/rss+xml'});
        const url = URL.createObjectURL(blob);
        const a=document.createElement('a');a.href=url;a.download='noticias.xml';a.click();URL.revokeObjectURL(url);
      }
      if(e.target && e.target.id==='btnPodcastRSS'){
        e.preventDefault();
        const items = PODCASTS.map(p=>`<item><title>${p.titulo}</title><pubDate>${new Date(p.fecha).toUTCString()}</pubDate><link>${p.spotify||location.href}</link></item>`).join('');
        const rss = `<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"><channel><title>Podcast Docentes Brown</title><link>${location.href}</link><description>Episodios</description>${items}</channel></rss>`;
        const blob = new Blob([rss], {type:'application/rss+xml'});
        const url = URL.createObjectURL(blob);
        const a=document.createElement('a');a.href=url;a.download='podcast.xml';a.click();URL.revokeObjectURL(url);
      }
    });

    (async ()=>{ await initPodcasts(); await initNews(); })();
  </script>
</body>
</html>
