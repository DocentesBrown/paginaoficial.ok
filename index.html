<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Docentes Brown ‚Äî Plataforma educativa</title>
  <meta name="description" content="Herramientas, podcast y noticias de Docentes Brown." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --azul:#24496e;
      --crema:#f3efdc;
      --violeta:#6c467e;
      --coral:#da6863;
      --negro:#101418;
      --gris:#5b6572;
      --borde:#e7e3d8;
      --whatsapp:#2b647b;
      --space-1:.6rem;
      --space-2:1rem;
      --space-3:1.6rem;
      --space-4:2.4rem;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--negro);background:var(--crema)}
    .container{width:min(1100px,92%);margin-inline:auto}
    section{margin-block:var(--space-4)}
    header{position:sticky;top:0;background:rgba(243,239,220,.9);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--borde);z-index:50}
    nav{display:flex;align-items:center;justify-content:space-between;padding:var(--space-1) 0}
    .brand{display:flex;align-items:center;gap:.65rem;font-weight:800;color:var(--azul);letter-spacing:.2px}
    .brand svg{width:34px;height:34px}
    .nav-links{display:flex;gap:.6rem;align-items:center}
    .nav-links a{font-weight:600;color:var(--azul);text-decoration:none;padding:.4rem .6rem;border-radius:10px}
    .nav-links a:hover{background:#eae5d3}
    .btn{border:none;cursor:pointer;border-radius:14px;padding:.7rem .95rem;font-weight:700;letter-spacing:.2px}
    .btn-primary{background:linear-gradient(135deg,var(--violeta),var(--coral));color:#fff}
    .btn-outline{background:#fff;border:1px solid var(--borde);color:var(--azul)}
    .card{background:#fff;border:1px solid var(--borde);border-radius:18px;box-shadow:0 8px 24px rgba(16,20,24,.04)}
    .section-title{color:var(--azul);margin:0 0 .6rem 0}
    .subtitle{color:var(--gris);font-size:1.04rem}
    /* HERO: carrusel de noticias */
    .news-carousel{position:relative;min-height:360px}
    .news-slide{position:relative;isolation:isolate;display:grid;grid-template-columns:1fr;padding:var(--space-3);transition:opacity .35s ease}
    .news-bg{position:absolute;inset:0;z-index:-1;background-size:cover;background-position:center;filter:brightness(.65)}
    .news-content{max-width:820px;color:#fff}
    .news-content h2{margin:.2rem 0 0;font-size:clamp(1.6rem,3vw,2.2rem)}
    .news-content p{margin:.5rem 0 1rem 0}
    .news-content .btn-link{display:inline-block;background:#ffffffcc;color:#1d2430;padding:.55rem .8rem;border-radius:12px;text-decoration:none;border:1px solid var(--borde)}
    .news-controls{position:absolute;inset:auto 0 12px 0;display:flex;align-items:center;justify-content:center;gap:.6rem}
    .news-prev,.news-next{border:1px solid var(--borde);background:#fff;border-radius:10px;padding:.3rem .55rem;cursor:pointer}
    .news-dots{display:flex;gap:.35rem}
    .news-dot{width:10px;height:10px;border-radius:999px;background:#ffffff80;border:1px solid #fff;cursor:pointer}
    .news-dot.active{background:#fff}
    /* Apps grid */
    .apps{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin:var(--space-4) 0}
    @media (max-width:920px){.apps{grid-template-columns:1fr 1fr}}
    @media (max-width:620px){.apps{grid-template-columns:1fr}}
    .app-card{padding:1.1rem;display:flex;flex-direction:column;gap:.6rem}
    .app-card h3{margin:.2rem 0;color:var(--azul)}
    .app-card a.btn-link{align-self:flex-start;border:1px solid var(--borde);padding:.55rem .8rem;border-radius:12px;text-decoration:none;color:var(--azul);font-weight:700}
    /* Podcast */
    .audio-list{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}
    @media (max-width:820px){.audio-list{grid-template-columns:1fr}}
    .audio-card{padding:1rem}
    .audio-card h4{margin:.2rem 0;color:var(--violeta)}
    .spotify-embed{position:relative}
    .spotify-embed .eq{position:absolute;left:10px;top:10px;display:flex;gap:3px}
    .spotify-embed .eq span{width:3px;height:10px;background:#1DB954;border-radius:2px;display:block;animation:db-eq 1s infinite ease-in-out}
    .spotify-embed .eq span:nth-child(2){animation-delay:.15s}
    .spotify-embed .eq span:nth-child(3){animation-delay:.3s}
    @keyframes db-eq{0%,100%{transform:scaleY(.4)}50%{transform:scaleY(1.4)}}
    /* Noticias (lista) */
    .news-list{display:grid;gap:.8rem}
    .news-item{padding:1rem}
    .news-item h4{margin:.1rem 0;color:var(--violeta)}
    /* CTA Sumate */
    .cta{padding:var(--space-3);display:flex;align-items:center;justify-content:space-between;gap:1rem}
    @media (max-width:820px){.cta{flex-direction:column;align-items:flex-start}}
    /* Footer */
    footer{margin-top:var(--space-4);border-top:1px solid var(--borde);padding:1.2rem 0;color:var(--gris)}
    footer a{color:var(--violeta);font-weight:700;text-decoration:none}
    /* Floating buttons */
    .floating{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:.6rem;z-index:60}
    .floating a{display:inline-flex;align-items:center;gap:.5rem;padding:.7rem .9rem;border-radius:999px;color:#fff;text-decoration:none;box-shadow:0 10px 26px rgba(0,0,0,.15)}
    .floating .wa{background:var(--whatsapp)}
    .floating .cafecito{background:var(--coral)}
    /* Dark mode */
    [data-theme="dark"]{--azul:#e5ecf3;--crema:#0f141a;--violeta:#b69ad2;--coral:#ff8a80;--negro:#eef2f6;--gris:#b0bac6;--borde:#2a2f36;--whatsapp:#2b647b}
    [data-theme="dark"] body{background:var(--crema);color:var(--negro)}
    [data-theme="dark"] header{background:rgba(15,20,26,.85);border-color:var(--borde)}
    [data-theme="dark"] .card{background:#131a22;border-color:var(--borde);box-shadow:0 8px 24px rgba(0,0,0,.3)}
    [data-theme="dark"] .nav-links a{color:var(--azul)}
    @media (prefers-reduced-motion: reduce){
      .news-slide{transition:none}
      .spotify-embed .eq span{animation:none}
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav>
        <div class="brand" aria-label="Docentes Brown">
          <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="6" y="6" width="52" height="52" rx="14" fill="url(#g)"/>
            <path d="M20 42c0-6 6-10 12-10s12 4 12 10" stroke="#fff" stroke-width="4" stroke-linecap="round"/>
            <path d="M22 25h20" stroke="#fff" stroke-width="4" stroke-linecap="round"/>
            <defs>
              <linearGradient id="g" x1="6" y1="6" x2="58" y2="58" gradientUnits="userSpaceOnUse">
                <stop stop-color="#6c467e"/><stop offset="1" stop-color="#da6863"/>
              </linearGradient>
            </defs>
          </svg>
          <span>Docentes Brown</span>
        </div>
        <div class="nav-links">
          <a href="#apps">Herramientas</a>
          <a href="#podcast">Podcast</a>
          <a href="#noticias">Noticias</a>
          <a href="#sumate">Sumate</a>
          <button id="toggleTheme" class="btn btn-outline" style="margin-left:.5rem">Modo oscuro</button>
        </div>
      </nav>
    </div>
  </header>

  <!-- HERO: carrusel de noticias -->
  <section class="hero">
    <div class="container" style="padding:0">
      <div class="card" style="padding:0;overflow:hidden">
        <div id="newsCarousel" class="news-carousel" aria-roledescription="carousel" aria-label="Noticias destacadas">
          <div class="news-slide" data-index="0"></div>
          <div class="news-controls">
            <button class="news-prev" aria-label="Anterior">‚óÄ</button>
            <div class="news-dots" role="tablist" aria-label="Paginaci√≥n de noticias"></div>
            <button class="news-next" aria-label="Siguiente">‚ñ∂</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Herramientas / Apps -->
  <section id="apps" class="container">
    <h2 class="section-title">Herramientas</h2>
    <div class="apps">
      <article class="card app-card">
        <h3>üõçÔ∏è Tienda Docentes Brown</h3>
        <p class="subtitle">Merch, materiales y m√°s para apoyar a la comunidad.</p>
        <a class="btn-link" href="https://pency.app/docentesbrown" target="_blank" rel="noopener">Abrir</a>
      </article>
      <article class="card app-card">
        <h3>üìù Buscador de Concursos de Superior</h3>
        <p class="subtitle">Consult√° y filtr√° concursos vigentes del nivel superior.</p>
        <a class="btn-link" href="https://docentesbrown.github.io/concursos_superior/" target="_blank" rel="noopener">Abrir</a>
      </article>
      <article class="card app-card">
        <h3>üí∏ Calculadora Salarial</h3>
        <p class="subtitle">Simul√° el salario docente seg√∫n cargo, horas y antig√ºedad.</p>
        <a class="btn-link" href="https://docentesbrown.github.io/Calculadora.Salarial.Docentes.Brown/" target="_blank" rel="noopener">Abrir</a>
      </article>
      <article class="card app-card">
        <h3>üéØ Buscador de Profes Particulares</h3>
        <p class="subtitle">Encontr√° profes por zona, localidad y materia.</p>
        <a class="btn-link" href="https://docentesbrown.github.io/buscador.particular/" target="_blank" rel="noopener">Abrir</a>
      </article>
    </div>
  </section>

  <!-- Podcast -->
  <section id="podcast" class="container">
    <div class="card" style="padding:1.5rem">
      <h2 class="section-title">üéôÔ∏è Podcast Docentes Brown</h2>
      <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin:.4rem 0 1rem 0">
        <a id="btnPodcastRSS" class="btn btn-outline" href="#">RSS Podcast</a>
      </div>
      <div id="podcastList" class="audio-list" aria-live="polite"></div>
      <small class="subtitle">Reproduc√≠ directamente desde Spotify.</small>
    </div>
  </section>

  <!-- Noticias -->
  <section id="noticias" class="container">
    <div class="card" style="padding:1.5rem">
      <h2 class="section-title">üóûÔ∏è Noticias</h2>
      <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin:.4rem 0 1rem 0">
        <button id="btnPrev" class="btn btn-outline">Anterior</button>
        <button id="btnNext" class="btn btn-outline">Siguiente</button>
        <a id="btnNewsRSS" class="btn btn-outline" href="#">RSS Noticias</a>
      </div>
      <div id="newsList" class="news-list" aria-live="polite"></div>
      <small class="subtitle" id="newsMeta"></small>
    </div>
  </section>

  <!-- Sumate (z√≥calo clickeable) -->
  <section id="sumate" class="container">
    <a class="card cta" href="https://forms.gle/TALg7vqSe8f6LzxK8" target="_blank" rel="noopener" style="text-decoration:none;">
      <div>
        <h3 style="margin:.2rem 0;color:var(--violeta)">¬øSos docente? Sumate a la gu√≠a</h3>
        <p style="margin:.2rem 0;color:var(--gris)">Complet√° el formulario y publicamos tu perfil con contacto y materias.</p>
      </div>
      <div class="cta-row">
        <span class="btn btn-primary" role="button" aria-label="Abrir formulario de Sumate">Abrir formulario</span>
        <a class="btn btn-outline" href="#" id="descargarCSV">Descargar plantilla CSV</a>
      </div>
    </a>
  </section>

  <footer>
    <div class="container">
      <div style="display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap;align-items:center">
        <small>¬© <span id="year"></span> Docentes Brown. Hecho con ‚ô• en Almirante Brown.</small>
        <small>Creado por <a href="https://instagram.com/docentesbrown" target="_blank" rel="noopener">@docentesbrown</a></small>
      </div>
    </div>
  </footer>

  <div class="floating">
    <a class="wa" href="https://wa.me/5491153196358" target="_blank" rel="noopener" aria-label="WhatsApp">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.05 11.998a8.99 8.99 0 0 1-12.96 7.964L3 21l1.077-4.006A8.99 8.99 0 1 1 21.05 12Z"></path><path d="M8 12c.2 1 1.5 2.5 2.5 3s1 .5 1.5 0l1-1.5c.4-.6.2-1-.4-1.3l-.7-.4c-.6-.3-.8-.2-1.1.2l-.2.3c-.2.3-.5.3-.8.1-.6-.4-1.3-1-1.8-1.7-.2-.3-.2-.6.1-.8l.3-.2c.4-.3.5-.5.2-1.1l-.4-.7c-.4-.6-.7-.8-1.3-.4L7 7.9C6.5 8.4 6.4 9.2 7 10c.3.5.7 1.1 1 2Z"></path></svg>
      <span>WhatsApp</span>
    </a>
    <a class="cafecito" href="https://cafecito.app/docentesbrown" target="_blank" rel="noopener" aria-label="Cafecito">‚òï Don√° un cafecito</a>
  </div>

  <script>
    // A√±o din√°mico
    document.getElementById('year').textContent = new Date().getFullYear();

    // Modo oscuro toggle
    const rootHtml = document.documentElement;
    const savedTheme = localStorage.getItem('db_theme');
    if(savedTheme){ rootHtml.setAttribute('data-theme', savedTheme); }
    document.getElementById('toggleTheme').addEventListener('click', ()=>{
      const current = rootHtml.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      rootHtml.setAttribute('data-theme', current);
      localStorage.setItem('db_theme', current);
    });

    // Helpers: cargar JSON externo con fallback
    async function loadJson(url, fallback){
      try{
        const r = await fetch(url, {cache:'no-store'});
        if(!r.ok) throw new Error('fetch failed');
        const data = await r.json();
        return Array.isArray(data) ? data : fallback;
      }catch(e){ return fallback; }
    }

    // Fallbacks locales
    const PODCASTS_FALLBACK = [
      {titulo:'Episodio 1 ‚Äî Bienvenida', fecha:'2025-08-01', spotify:'https://open.spotify.com/episode/0example2', descripcion:'Presentaci√≥n del proyecto y objetivos.'},
      {titulo:'Episodio 2 ‚Äî Evaluaci√≥n justa', fecha:'2025-09-10', spotify:'https://open.spotify.com/episode/0example3', descripcion:'R√∫bricas, feedback y herramientas.'}
    ];

    const NEWS_FALLBACK = [
      {titulo:'Convocatoria a concursos 2025', fecha:'2025-09-15', link:'https://docentesbrown.github.io/concursos_superior/', resumen:'Se publicaron nuevas bases y condiciones.', img:''},
      {titulo:'Lanzamos la Calculadora Salarial', fecha:'2025-07-20', link:'https://docentesbrown.github.io/Calculadora.Salarial.Docentes.Brown/', resumen:'Herramienta abierta y colaborativa.', img:''},
      {titulo:'Buscador de particulares actualizado', fecha:'2025-08-25', link:'https://docentesbrown.github.io/buscador.particular/', resumen:'Nuevos filtros y mejoras de velocidad.', img:''},
      {titulo:'Abrimos canal de Podcast', fecha:'2025-09-18', link:'#podcast', resumen:'Ya pod√©s escuchar los primeros episodios.', img:''}
    ];

    let PODCASTS = PODCASTS_FALLBACK; // Para producci√≥n, pod√©s cargarlos de archivos JSON en el repo.
    let NEWS = NEWS_FALLBACK; // Para producci√≥n, pod√©s cargarlos de archivos JSON en el repo.

    // Podcast (Spotify embed + EQ decorativo)
    async function initPodcasts(){
      PODCASTS = await loadJson('podcasts.json', PODCASTS_FALLBACK);
      PODCASTS.sort((a,b)=> new Date(b.fecha)-new Date(a.fecha));
      const $pod = document.getElementById('podcastList');
      if(!$pod) return;
      if(!PODCASTS.length){ $pod.innerHTML = '<p class="subtitle">Pronto subimos los primeros episodios.</p>'; return; }
      $pod.innerHTML = PODCASTS.map(p=>{
        const url = p.spotify || '#';
        const embed = url.replace('/episode/','/embed/episode/').replace('/show/','/embed/show/');
        return `
          <article class="card audio-card">
            <h4>${p.titulo}</h4>
            <p class="subtitle" style="margin:.2rem 0 .6rem 0">${new Date(p.fecha).toLocaleDateString()} ‚Äî ${p.descripcion||''}</p>
            <div class="spotify-embed">
              <div class="eq" aria-hidden="true"><span></span><span></span><span></span></div>
              <iframe loading="lazy" style="border-radius:12px" src="${embed}" width="100%" height="152" frameborder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
            </div>
          </article>`;
      }).join('');
    }

    // Noticias (lista abajo + carrusel arriba)
    let newsPage = 1, pageSize = 6;

    function renderNewsPaged(){
      const $news = document.getElementById('newsList');
      const $meta = document.getElementById('newsMeta');
      if(!$news) return;
      if(!NEWS.length){ $news.innerHTML = '<p class="subtitle">Sin novedades por ahora.</p>'; return; }
      NEWS.sort((a,b)=> new Date(b.fecha) - new Date(a.fecha));
      const totalPages = Math.max(1, Math.ceil(NEWS.length / pageSize));
      newsPage = Math.min(Math.max(1, newsPage), totalPages);
      const start = (newsPage-1)*pageSize;
      const slice = NEWS.slice(start, start+pageSize);
      $news.innerHTML = slice.map(n=>`
        <article class="card news-item">
          <h4>${n.titulo}</h4>
          <p class="subtitle" style="margin:.2rem 0">${new Date(n.fecha).toLocaleDateString()}</p>
          <p style="margin:.2rem 0;color:var(--gris)">${n.resumen||''}</p>
          ${n.link?`<a class="btn-link" href="${n.link}" target="_blank" rel="noopener">Ver m√°s</a>`:''}
        </article>
      `).join('');
      if($meta) $meta.textContent = `P√°gina ${newsPage} de ${totalPages} ‚Äî ${NEWS.length} noticias`;
    }

    function buildSlide(n){
      const bg = n.img ? `<div class='news-bg' style="background-image:url('${n.img}')"></div>` :
                         `<div class='news-bg' style="background:linear-gradient(135deg,var(--violeta),var(--coral))"></div>`;
      const link = n.link? `<a class="btn-link" href="${n.link}" target="_blank" rel="noopener">Ver m√°s</a>`: '';
      return `${bg}<div class='news-content'><h2>${n.titulo}</h2><p>${n.resumen||''}</p>${link}</div>`;
    }

    function renderNewsTop(){
      const cont = document.getElementById('newsCarousel');
      if(!cont) return;
      NEWS.sort((a,b)=> new Date(b.fecha) - new Date(a.fecha));
      const top = NEWS.slice(0,3);
      const slide = cont.querySelector('.news-slide');
      if(!top.length){ slide.innerHTML = '<p class="subtitle" style="color:#fff;margin:1rem">Sin novedades por ahora.</p>'; return; }
      slide.innerHTML = buildSlide(top[0]);
      const dotsWrap = cont.querySelector('.news-dots');
      dotsWrap.innerHTML = top.map((_,i)=>`<button role="tab" class="news-dot ${i===0?'active':''}" data-i="${i}" aria-label="Ir a noticia ${i+1}"></button>`).join('');
      cont.querySelector('.news-prev').onclick = ()=> carouselPrev();
      cont.querySelector('.news-next').onclick = ()=> carouselNext();
      dotsWrap.onclick = (e)=>{ if(e.target && e.target.classList.contains('news-dot')){ goTo(+e.target.dataset.i); } };
      window.__DB_CAROUSEL__ = {items: top, i:0, el:cont, timer:null};
      startCarousel();
    }

    function startCarousel(){ const s = window.__DB_CAROUSEL__; stopCarousel(); if(!s) return; s.timer=setInterval(carouselNext,5000); }
    function stopCarousel(){ const s = window.__DB_CAROUSEL__; if(s&&s.timer){ clearInterval(s.timer); s.timer=null; } }
    function carouselNext(){ const s = window.__DB_CAROUSEL__; if(!s) return; s.i=(s.i+1)%s.items.length; renderSlide(); }
    function carouselPrev(){ const s = window.__DB_CAROUSEL__; if(!s) return; s.i=(s.i-1+s.items.length)%s.items.length; renderSlide(); }
    function goTo(i){ const s = window.__DB_CAROUSEL__; if(!s) return; s.i=i % s.items.length; renderSlide(); }
    function renderSlide(){
      const s = window.__DB_CAROUSEL__;
      if(!s) return;
      const slide = s.el.querySelector('.news-slide');
      slide.style.opacity=0;
      setTimeout(()=>{
        slide.innerHTML = buildSlide(s.items[s.i]);
        slide.style.opacity=1;
        const dots=[...s.el.querySelectorAll('.news-dot')];
        dots.forEach((d,idx)=>d.classList.toggle('active', idx===s.i));
      },180);
    }

    async function initNews(){
      NEWS = await loadJson('news.json', NEWS_FALLBACK);
      renderNewsTop();
      renderNewsPaged();
      const c = document.getElementById('newsCarousel');
      if(c){ c.addEventListener('mouseenter', stopCarousel); c.addEventListener('mouseleave', startCarousel); }
    }

    // Paginaci√≥n y RSS Noticias
    document.addEventListener('click', (e)=>{
      if(e.target && e.target.id==='btnNext'){newsPage++; renderNewsPaged();}
      if(e.target && e.target.id==='btnPrev'){newsPage--; renderNewsPaged();}
      if(e.target && e.target.id==='btnNewsRSS'){
        e.preventDefault();
        const items = NEWS.map(n=>`<item><title>${n.titulo}</title><pubDate>${new Date(n.fecha).toUTCString()}</pubDate><link>${n.link||location.href}</link><description>${(n.resumen||'')}</description></item>`).join('');
        const rss = `<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"><channel><title>Noticias Docentes Brown</title><link>${location.href}</link><description>Novedades</description>${items}</channel></rss>`;
        const blob = new Blob([rss], {type:'application/rss+xml'});
        const url = URL.createObjectURL(blob);
        const a=document.createElement('a');a.href=url;a.download='noticias.xml';a.click();URL.revokeObjectURL(url);
      }
      if(e.target && e.target.id==='btnPodcastRSS'){
        e.preventDefault();
        const items = PODCASTS.map(p=>`<item><title>${p.titulo}</title><pubDate>${new Date(p.fecha).toUTCString()}</pubDate><link>${p.spotify||location.href}</link></item>`).join('');
        const rss = `<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"><channel><title>Podcast Docentes Brown</title><link>${location.href}</link><description>Episodios</description>${items}</channel></rss>`;
        const blob = new Blob([rss], {type:'application/rss+xml'});
        const url = URL.createObjectURL(blob);
        const a=document.createElement('a');a.href=url;a.download='podcast.xml';a.click();URL.revokeObjectURL(url);
      }
    });

    // Descarga de plantilla CSV (Sumate)
    document.getElementById('descargarCSV').addEventListener('click', (e)=>{
      e.preventDefault();
      const headers = ['nombre','zona','localidad','materias(separadas por ;)','modalidad(separadas por ;)','wa','mail'];
      const example = [
        ['Naty Su√°rez','Sur','Adrogu√©','Matem√°tica;F√≠sica','Virtual;Presencial','5491153196358','naty@example.com'],
        ['Juan P√©rez','Centro','Burzaco','Lengua','Presencial','5491133333333','juan@example.com']
      ].map(r=>r.join(',')).join('\\n');
      const csv = headers.join(',') + '\\n' + example;
      const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'plantilla_docentes.csv'; a.click();
      URL.revokeObjectURL(url);
    });

    // Inicializar
    (async ()=>{ await initPodcasts(); await initNews(); })();

    // AUTO‚ÄëTESTS LIGEROS
    (async function runSelfTests(){
      const results = [];
      try{
        const fb = [1,2];
        const dataUrlNotArray = 'data:application/json,%7B%7D';
        const out = await loadJson(dataUrlNotArray, fb);
        results.push({name:'loadJson fallback', pass: Array.isArray(out) && out.length===2});
        results.push({name:'#newsCarousel existe', pass: !!document.getElementById('newsCarousel')});
        results.push({name:'#podcastList existe', pass: !!document.getElementById('podcastList')});
        const btn = document.getElementById('toggleTheme');
        const prev = document.documentElement.getAttribute('data-theme')||'light';
        btn.click(); const after = document.documentElement.getAttribute('data-theme')||'light'; btn.click();
        results.push({name:'Modo oscuro toggle', pass: prev!==after});
        if(window.__DB_CAROUSEL__){ const i0=window.__DB_CAROUSEL__.i; carouselNext(); const i1=window.__DB_CAROUSEL__.i; results.push({name:'Carousel next avanza', pass: i1!==i0}); }
        const hasSpotify = [...document.querySelectorAll('#podcastList iframe')].every(f=>/open\\.spotify\\.com\\/embed\\//.test(f.src));
        results.push({name:'Podcast ‚Üí Spotify embed', pass: hasSpotify});
        const wa = document.querySelector('.floating .wa'); results.push({name:'WhatsApp correcto', pass: /wa\\.me\\/5491153196358$/.test(wa.href)});
        console.log('[DB Tests]', results); const allPass = results.every(r=>r.pass); if(!allPass){ console.warn('Alg√∫n test fall√≥:', results.filter(r=>!r.pass)); }
      }catch(err){ console.error('Error en tests:', err); }
    })();
  </script>
</body>
</html>
